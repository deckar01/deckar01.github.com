var Leap={Version:"0.7.1"};Leap.Controller=function(e){this._frames=[],this._listeners={},this._listenerId=0,typeof WebSocket=="undefined"&&typeof MozWebSocket!="undefined"&&(WebSocket=MozWebSocket),typeof WebSocket!="undefined"&&(this._socket=new WebSocket(e),this._socket._controller=this,this._socket.onmessage=function(e){this._controller._onmessage(e)},this._socket.onopen=function(e){for(index in this._controller._listeners)this._controller._listeners[index].onConnect(this._controller)},this._socket.onclose=function(e){for(index in this._controller._listeners)this._controller._listeners[index].onDisconnect(this._controller)},this._socket.onerror=function(e){this.onclose(e)})},Leap.Controller.prototype={isConnected:function(){return this._socket.connected},frame:function(e){if(e==null)return this._frames[this._frames.length-1];if(e<this._frames.length)return this._frames[this._frames.length-e-1]},addListener:function(e){e._id=this._listenerId++,this._listeners[e._id]=e,e.onInit(this)},removeListener:function(e){e.onExit(this),this._listeners[e._id].onExit(this),delete this._listeners[e._id]},config:function(){},calibratedScreens:function(){},_onmessage:function(e){var t=JSON.parse(e.data);if(this._discardVersionFrame(t)){var n=new Leap.Frame(t);this._frames.push(n);for(index in this._listeners)this._listeners[index].onFrame(this)}},_discardVersionFrame:function(e){return e.version?(this._discardVersionFrame=function(){return!0},!1):!0}},Leap.Frame=function(e){this._fingers=new Leap.FingerList,this._tools=new Leap.ToolList,this._pointables=new Leap.PointableList,this._hands=new Leap.HandList,this._fingerTable={},this._toolTable={},this._pointableTable={},this._handTable={};if(e==null)this._id=null,this._timestamp=null,this._valid=!1,this._r=new Leap.Matrix,this._s=null,this._t=new Leap.Vector;else{this._id=e.id,this._timestamp=e.timestamp,this._valid=!0,this._r=new Leap.Matrix(e.r),this._s=e.s,this._t=new Leap.Vector(e.t);for(index in e.hands){var t=new Leap.Hand(e.hands[index],this);this._handTable[t._id]=t,this._hands.push(t)}for(index in e.pointables){var n=this._handTable[e.pointables[index].handId];if(e.pointables[index].tool){var r=new Leap.Tool(e.pointables[index],n);this._pointableTable[r._id]=this._toolTable[r._id]=r,this._pointables.push(r),this._tools.push(r),n&&(n._pointableTable[r._id]=n._toolTable[r._id]=r,n._pointables.push(r),n._tools.push(r))}else{var r=new Leap.Finger(e.pointables[index],n);this._pointableTable[r._id]=this._fingerTable[r._id]=r,this._pointables.push(r),this._fingers.push(r),n&&(n._pointableTable[r._id]=n._fingerTable[r._id]=r,n._pointables.push(r),n._fingers.push(r))}}}},Leap.Frame.prototype={id:function(){return this._id},timestamp:function(){return this._timestamp},rotationAngle:function(e,t){},rotationAxis:function(e){},rotationMatrix:function(e){},scaleFactor:function(e){},translation:function(e){},finger:function(e){return this._fingerTable[e]==null?Leap.Finger.invalid():this._fingers[e]},fingers:function(){return this._fingers},hand:function(e){return this._handTable[e]==null?Leap.Hand.invalid():this._handTable[e]},hands:function(){return this._hands},pointable:function(e){return this._pointableTable[e]==null?Leap.Pointable.invalid():this._pointableTable[e]},pointables:function(){return this._pointables},tool:function(e){return this._toolTable[e]==null?Leap.Tool.invalid():this._toolTable[e]},tools:function(){return this._tools},pointables:function(){return this._pointables},compare:function(e){return this._id==e.id},toString:function(){var e="{timestamp:"+this._timestamp+",id:"+this._id+",hands:[";for(var t=0;t<this._hands.length;t++)e+=this._hands[t].toString();return e+="]}",e},isValid:function(){return this._valid}},Leap.Frame.invalid=function(){return new Leap.Frame},Leap.Hand=function(e,t){this._fingers=new Leap.FingerList,this._tools=new Leap.ToolList,this._pointables=new Leap.PointableList,this._fingerTable={},this._toolTable={},this._pointableTable={},e==null?(this._frame=null,this._id=null,this._valid=!1,this._r=new Leap.Matrix,this._s=null,this._t=new Leap.Vector,this._direction=new Leap.Vector,this._palmNormal=new Leap.Vector,this._palmPosition=new Leap.Vector,this._palmVelocity=new Leap.Vector,this._sphereCenter=new Leap.Vector,this._sphereRadius=null):(this._frame=t,this._id=e.id,this._valid=!0,this._r=new Leap.Matrix(e.r),this._s=e.s,this._t=new Leap.Vector(e.t),this._direction=new Leap.Vector(e.direction),this._palmNormal=new Leap.Vector(e.palmNormal),this._palmPosition=new Leap.Vector(e.palmPosition),this._palmVelocity=new Leap.Vector(e.palmVelocity),this._sphereCenter=new Leap.Vector(e.sphereCenter),this._sphereRadius=e.sphereRadius)},Leap.Hand.prototype={frame:function(){return this._frame},id:function(){return this._id},direction:function(){return this._direction},palmNormal:function(){return this._palmNormal},palmPosition:function(){return this._palmPosition},palmVelocity:function(){return this._palmVelocity},sphereCenter:function(){return this._sphereCenter},sphereRadius:function(){return this._sphereRadius},rotationAngle:function(e,t){},rotationAxis:function(e){},rotationMatrix:function(e){},scaleFactor:function(e){},translation:function(e){},finger:function(e){return this._fingerTable[e]==null?Leap.Finger.invalid():this._fingerTable[e]},fingers:function(){return this._fingers},pointable:function(e){return this._pointableTable[e]==null?Leap.Pointable.invalid():this._pointableTable[e]},pointables:function(){return this._pointables},tool:function(e){return this._toolTable[e]==null?{isValid:!1}:this._toolTable[e]},tools:function(){return this._tools},toString:function(){var e="{id:"+obj._id+",sphereCenter:"+(obj._sphereCenter==null?"null":obj._sphereCenter)+",";e+="sphereRadius:"+(obj._sphereRadius==null?"null":obj._sphereRadius)+",",e+="normal:"+(obj._normal==undefined?"null":obj._normal.toString())+",fingers:[";for(var t=0;t<this._fingers.length;t++)e+=this._fingers[t].toString();e+="],tools:[";for(var t=0;t<this._tools.length;t++)e+=this._tools[t].toString();return e+="],palmNormal:"+(obj._palmNormal==undefined?"null":obj._palmNormal.toString())+",",e+="palmPosition:"+(obj._palmPosition==undefined?"null":obj._palmPosition.toString())+",",e+="palmVelocity:"+(obj._palmVelocity==undefined?"null":obj._palmVelocity.toString())+"}",e},isValid:function(){return this._valid}},Leap.Hand.invalid=function(){return new Leap.Hand},Leap.HandList=function(){},Leap.HandList.prototype=new Array,Leap.HandList.prototype.append=function(e){for(i=0;i<e.length;i++)this.push(new Leap.Hand(e[i]))},Leap.HandList.prototype.count=function(){return this.length},Leap.HandList.prototype.empty=function(){return this.length>0},Leap.Listener=function(){this.onConnect=function(e){},this.onDisconnect=function(e){},this.onExit=function(e){},this.onFrame=function(e){},this.onInit=function(e){}},Leap.Matrix=function(e){e instanceof Leap.Matrix?(this.xBasis=new Leap.Vector(e.xBasis),this.yBasis=new Leap.Vector(e.yBasis),this.zBasis=new Leap.Vector(e.zBasis),this.origin=new Leap.Vector(e.origin)):e instanceof Array?e[0]instanceof Leap.Vector&&typeof e[1]=="number"?(this.setRotation(e[0],e[1]),this.origin=new Leap.Vector(e[2])):(this.xBasis=new Leap.Vector(e[0]),this.yBasis=new Leap.Vector(e[1]),this.zBasis=new Leap.Vector(e[2]),this.origin=new Leap.Vector(e[3])):(this.xBasis=new Leap.Vector([1,0,0]),this.yBasis=new Leap.Vector([0,1,0]),this.zBasis=new Leap.Vector([0,0,1]),this.origin=new Leap.Vector([0,0,0]))},Leap.Matrix.prototype={setRotation:function(e,t){var n=e.normalized(),r=Math.sin(t),i=Math.cos(t),s=1-i;this.xBasis=new Leap.Vector([n.x*n.x*s+i,n.x*n.y*s-n.z*r,n.x*n.z*s+n.y*r]),this.yBasis=new Leap.Vector([n.y*n.x*s+n.z*r,n.y*n.y*s+i,n.y*n.z*s-n.x*r]),this.zBasis=new Leap.Vector([n.z*n.x*s-n.y*r,n.z*n.y*s+n.x*r,n.z*n.z*s+i])},transformPoint:function(e){return this.origin.plus(this.transformDirection(e))},transformDirection:function(e){var t=this.xBasis.multiply(e.x),n=this.yBasis.multiply(e.y),r=this.zBasis.multiply(e.z);return t.plus(n).plus(r)},times:function(e){var t=this.transformDirection(e.xBasis),n=this.transformDirection(e.yBasis),r=this.transformDirection(e.zBasis),i=this.transformPoint(e.origin);return new Leap.Matrix([t,n,r,i])},rigidInverse:function(){var e=new Leap.Vector([this.xBasis.x,this.yBasis.x,this.zBasis.x]),t=new Leap.Vector([this.xBasis.y,this.yBasis.y,this.zBasis.y]),n=new Leap.Vector([this.xBasis.z,this.yBasis.z,this.zBasis.z]),r=new Leap.Matrix([e,t,n]);return r.origin=r.transformDirection(Leap.Vector.zero().minus(this.origin)),r},toArray3x3:function(e){return e==null?e=[]:e.length=0,e[0]=this.xBasis.x,e[1]=this.xBasis.y,e[2]=this.xBasis.z,e[3]=this.yBasis.x,e[4]=this.yBasis.y,e[5]=this.yBasis.z,e[6]=this.zBasis.x,e[7]=this.zBasis.y,e[8]=this.zBasis.z,e},toArray4x4:function(e){return e==null?e=[]:e.length=0,e[0]=this.xBasis.x,e[1]=this.xBasis.y,e[2]=this.xBasis.z,e[3]=0,e[4]=this.yBasis.x,e[5]=this.yBasis.y,e[6]=this.yBasis.z,e[7]=0,e[8]=this.zBasis.x,e[9]=this.zBasis.y,e[10]=this.zBasis.z,e[11]=0,e[12]=this.origin.x,e[13]=this.origin.y,e[14]=this.origin.z,e[15]=1,e},toString:function(){return"{xBasis:"+this.xBasis+",yBasis:"+this.yBasis+",zBasis:"+this.zBasis+",origin:"+this.origin+"}"},compare:function(e){return this.xBasis.compare(e.xBasis)&&this.yBasis.compare(e.yBasis)&&this.zBasis.compare(e.zBasis)&&this.origin.compare(e.origin)}},Leap.Matrix.identity=function(){return new Leap.Matrix},Leap.Pointable=function(e,t,n){n==null&&(n=this),e==null?(n._frame=null,n._hand=null,n._id=null,n._valid=!1,n._direction=new Leap.Vector,n._tipPosition=new Leap.Vector,n._tipVelocity=new Leap.Vector,n._length=null,n._width=null):(n._frame=t?t._frame:null,n._hand=t,n._id=e.id,n._valid=!0,n._direction=new Leap.Vector(e.direction),n._tipPosition=new Leap.Vector(e.tipPosition),n._tipVelocity=new Leap.Vector(e.tipVelocity),n._length=e.length,n._width=e.width)},Leap.Pointable.prototype={frame:function(){return this._frame},hand:function(){return this._hand},id:function(){return this._id},direction:function(){return this._direction},tipPosition:function(){return this._tipPosition},tipVelocity:function(){return this._tipVelocity},length:function(){return this._length},width:function(){return this._width},toString:function(){var e="{id:"+this._id+",direction:"+this._direction.toString()+",";return e+="tipPosition:"+this._tipPosition.toString()+",",e+="tipVelocity:"+this._tipVelocity.toString()+",",e+="length:"+this._length+",",e+="width:"+this._width+"}",e},isValid:function(){return this._valid}},Leap.Pointable.invalid=function(){return new Leap.Pointable},Leap.Finger=function(e,t){Leap.Pointable(e,t,this),this._isFinger=!0,this._isTool=!1},Leap.Finger.prototype=Leap.Pointable.prototype,Leap.Finger.invalid=function(){return new Leap.Finger},Leap.Tool=function(e,t){Leap.Pointable(e,t,this),this._isTool=!0,this._isFinger=!1},Leap.Tool.prototype=Leap.Pointable.prototype,Leap.Tool.invalid=function(){return new Leap.Tool},Leap.PointableList=function(){},Leap.PointableList.prototype=new Array,Leap.PointableList.prototype.append=function(e){for(i=0;i<e.length;i++)this.push(new Leap.Pointable(e[i]))},Leap.PointableList.prototype.count=function(){return this.length},Leap.PointableList.prototype.empty=function(){return this.length>0},Leap.FingerList=function(){},Leap.FingerList.prototype=new Array,Leap.FingerList.prototype.append=function(e){for(i=0;i<e.length;i++)this.push(new Leap.Finger(e[i]))},Leap.FingerList.prototype.count=function(){return this.length},Leap.FingerList.prototype.empty=function(){return this.length>0},Leap.ToolList=function(){},Leap.ToolList.prototype=new Array,Leap.ToolList.prototype.append=function(e){for(i=0;i<e.length;i++)this.push(new Leap.Tool(e[i]))},Leap.ToolList.prototype.count=function(){return this.length},Leap.ToolList.prototype.empty=function(){return this.length>0},Leap.Vector=function(e){e instanceof Leap.Vector?(this.x=e.x,this.y=e.y,this.z=e.z):e!=null?(this.x=typeof e[0]=="number"?e[0]:0,this.y=typeof e[1]=="number"?e[1]:0,this.z=typeof e[2]=="number"?e[2]:0):(this.x=0,this.y=0,this.z=0)},Leap.Vector.prototype={angleTo:function(e){var t=this.magnitude()*e.magnitude();return t>0?Math.acos(this.dot(e)/t):0},cross:function(e){var t=this.y*e.z-e.y*this.z,n=this.x*e.z-e.x*this.z,r=this.x*e.y-e.x*this.y;return new Leap.Vector([t,n,r])},distanceTo:function(e){return this.minus(e).magnitude()},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},plus:function(e){return new Leap.Vector([this.x+e.x,this.y+e.y,this.z+e.z])},minus:function(e){return new Leap.Vector([this.x-e.x,this.y-e.y,this.z-e.z])},multiply:function(e){return new Leap.Vector([this.x*e,this.y*e,this.z*e])},dividedBy:function(e){return new Leap.Vector([this.x/e,this.y/e,this.z/e])},magnitude:function(){return Math.sqrt(this.magnitudeSquared())},magnitudeSquared:function(){return Math.pow(this.x,2)+Math.pow(this.y,2)+Math.pow(this.z,2)},normalized:function(){var e=this.magnitude();return e>0?this.dividedBy(e):new Leap.Vector},pitch:function(){return Math.atan2(this.y,-this.z)},roll:function(){return Math.atan2(this.x,-this.y)},yaw:function(){return Math.atan2(this.x,-this.z)},toArray:function(){return[this.x,this.y,this.z]},toString:function(){return"{x:"+this.x+",y:"+this.y+",z:"+this.z+"}"},compare:function(e){return this.x==e.x&&this.y==e.y&&this.z==e.z},isValid:function(){return this.x!=NaN&&this.x>-Infinity&&this.x<Infinity&&this.y!=NaN&&this.y>-Infinity&&this.y<Infinity&&this.z!=NaN&&this.z>-Infinity&&this.z<Infinity}},Leap.Vector.backward=function(){return new Leap.Vector([0,0,1])},Leap.Vector.down=function(){return new Leap.Vector([0,-1,0])},Leap.Vector.forward=function(){return new Leap.Vector([0,0,-1])},Leap.Vector.left=function(){return new Leap.Vector([-1,0,0])},Leap.Vector.right=function(){return new Leap.Vector([1,0,0])},Leap.Vector.up=function(){return new Leap.Vector([0,1,0])},Leap.Vector.xAxis=function(){return new Leap.Vector([1,0,0])},Leap.Vector.yAxis=function(){return new Leap.Vector([0,1,0])},Leap.Vector.zAxis=function(){return new Leap.Vector([0,0,1])},Leap.Vector.zero=function(){return new Leap.Vector([0,0,0])};